generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model cart_o {
  id                 Int                  @unique(map: "id_UNIQUE") @default(autoincrement())
  saldo              Decimal?             @db.Decimal(8, 2)
  cliente_id         Int
  codigocartao       String?              @db.VarChar(45)
  cliente            cliente              @relation(fields: [cliente_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cartão_cliente1")
  cliente_has_viagem cliente_has_viagem[]

  @@id([id, cliente_id])
  @@index([cliente_id], map: "fk_cartão_cliente1_idx")
  @@map("cartão")
}

model cliente {
  id         Int      @id @unique(map: "id_UNIQUE") @default(autoincrement())
  nome       String?  @db.VarChar(200)
  saldo      Decimal? @db.Decimal(8, 2)
  cpf        String?  @db.VarChar(14)
  usuario_id Int
  cart_o     cart_o[]
  usuario    usuario  @relation(fields: [usuario_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cliente_usuario")

  @@index([usuario_id], map: "fk_cliente_usuario_idx")
}

model cliente_has_viagem {
  viagem_id Int
  tarifa    Decimal? @db.Decimal(5, 2)
  data      String?  @db.VarChar(45)
  cart_o_id Int      @map("cartão_id")
  cart_o    cart_o   @relation(fields: [cart_o_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cliente_has_viagem_cartão1")
  viagem    viagem   @relation(fields: [viagem_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_cliente_has_viagem_viagem1")

  @@id([cart_o_id, viagem_id])
  @@index([cart_o_id], map: "fk_cliente_has_viagem_cartão1_idx")
  @@index([viagem_id], map: "fk_cliente_has_viagem_viagem1_idx")
}

model linha {
  id          Int       @id @unique(map: "id_UNIQUE") @default(autoincrement())
  inicio      DateTime? @db.DateTime(0)
  fim         DateTime? @db.DateTime(0)
  localinicio String?   @db.VarChar(45)
  localfim    String?   @db.VarChar(45)
  viagem      viagem[]
}

model motorista {
  id     Int      @id @unique(map: "id_UNIQUE") @default(autoincrement())
  nome   String?  @db.VarChar(200)
  foto   String?  @db.VarChar(200)
  viagem viagem[]
}

model onibus {
  id     Int      @id @unique(map: "id_UNIQUE") @default(autoincrement())
  placa  String?  @db.VarChar(8)
  viagem viagem[]
}

model usuario {
  id      Int       @id @unique(map: "idtable1_UNIQUE") @default(autoincrement())
  nome    String?   @db.VarChar(200)
  email   String?   @db.VarChar(200)
  senha   String?   @db.VarChar(45)
  token   String?   @db.VarChar(45)
  cliente cliente[]
}

model viagem {
  id                 Int                  @id @unique(map: "id_UNIQUE") @default(autoincrement())
  data               String?              @db.VarChar(45)
  linha_id           Int
  onibus_id          Int
  motorista_id       Int
  cliente_has_viagem cliente_has_viagem[]
  linha              linha                @relation(fields: [linha_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_viagem_linha1")
  motorista          motorista            @relation(fields: [motorista_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_viagem_motorista1")
  onibus             onibus               @relation(fields: [onibus_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_viagem_onibus1")

  @@index([linha_id], map: "fk_viagem_linha1_idx")
  @@index([motorista_id], map: "fk_viagem_motorista1_idx")
  @@index([onibus_id], map: "fk_viagem_onibus1_idx")
}
